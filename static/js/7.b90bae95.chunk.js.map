{"version":3,"sources":["scripts/views/shopping/index.js"],"names":["Shopping","observer","checkOne","e","checked","target","goodId","ShopCar","changeCheckOne","checkAll","changeQuan","reduce","count","changeOneCount","location","reload","add","changeCount","v","value","changeCountByGoodId","delSelect","delGoodBySelect","goBack","history","push","getCarList","sessionStorage","mobile","carList","quan","total","checkNum","className","style","backgroundColor","mode","leftContent","key","onClick","this","width","height","src","onLeftClick","console","log","rightContent","type","marginRight","color","fontSize","padding","map","i","index","id","_id","onChange","goodImg","alt","goodName","goodPrice","goodsid","textAlign","background","border","Component"],"mappings":"mTAcMA,EADLC,Y,6MAcGC,SAAS,SAACC,GAEN,IAAIC,EAAUD,EAAEE,OAAOD,QACnBE,EAAUH,EAAEE,OAAOC,OAEvBC,IAAQC,eAAeJ,EAAQE,I,EAGnCG,SAAS,SAACN,GACNI,IAAQG,WAAWP,EAAEE,OAAOD,U,EAGhCO,OAAO,SAACL,EAAOM,GACRA,EAAM,IACLL,IAAQM,eAAeP,GAAO,GAC9BQ,SAASC,W,EAIjBC,IAAM,SAACV,EAAOM,GACPA,EAAM,KACLL,IAAQM,eAAeP,GAAO,I,EAItCW,YAAY,SAACX,EAAOY,GAChB,IAAIN,EAAQM,EAAEb,OAAOc,MAClBP,EAAM,GAAGA,EAAM,KACdL,IAAQa,oBAAoBd,EAAa,EAANM,I,EAI3CS,UAAU,WACNd,IAAQe,mB,EAGZC,OAAO,WACHC,IAAQC,KAAK,e,mFA9CblB,IAAQmB,aAIJC,eAAeC,QACfJ,IAAQC,KAAK,Y,+BA4CZ,IAAD,OAGAI,EAIDtB,IAJCsB,QACAC,EAGDvB,IAHCuB,KACAC,EAEDxB,IAFCwB,MACAC,EACDzB,IADCyB,SAEJ,OACI,6BAEI,yBAAKC,UAAU,UACX,uBAASC,MAAO,CAACC,gBAAgB,WACjCC,KAAK,QAELC,YAAa,CACT,yBAAKC,IAAI,IAAIC,QAASC,KAAKjB,OAAQW,MAAO,CAACO,MAAM,OAAOC,OAAO,QAASC,IAAI,+DAIhFC,YAAa,kBAAMC,QAAQC,IAAI,gBAC/BC,aAAc,CACV,uBAAMT,IAAI,IAAIU,KAAK,SAASd,MAAO,CAAEe,YAAa,OAAQC,MAAM,YAGpE,uBAAGZ,IAAI,IAAIJ,MAAO,CAACiB,SAAS,OAAOD,MAAM,OAAOE,QAAQ,MAAMX,MAAM,SAApE,wBAGJ,wBAAIR,UAAU,SAENJ,EAAQwB,KAAI,SAACC,EAAEC,GACX,OACR,wBAAIjB,IAAKiB,EAAOC,GAAIF,EAAEG,KACV,uBACArD,QAASkD,EAAElD,QACXE,OAAQgD,EAAEhD,OACVoD,SAAU,EAAKxD,UAHf,KAKA,yBAAKyC,IAAKW,EAAEK,QAASC,IAAI,KACzB,6DAAUN,EAAEO,UACZ,oCAAKP,EAAEQ,WACP,0BAAM7B,UAAU,UAAUM,QAAS,kBAAM,EAAK5B,OAAO2C,EAAEhD,OAAQgD,EAAE1C,SAAjE,KACA,0BAAMqB,UAAU,OACZ,2BAAO8B,QAAST,EAAEhD,OAAQ0C,KAAK,OAAO7B,MAAOmC,EAAE1C,MAAO8C,SAAU,SAACxC,GAAQ,EAAKD,YAAYqC,EAAEhD,OAAQY,IAAMgB,MAAO,CAAEO,MAAO,OAAQU,SAAU,MAAOa,UAAW,SAAUC,WAAY,OAAQC,OAAQ,QAExM,0BAAMjC,UAAU,SAASM,QAAS,kBAAM,EAAKvB,IAAIsC,EAAEhD,OAAQgD,EAAE1C,SAA7D,UAOhB,yBAAKqB,UAAU,YACX,uBAAUM,QAASC,KAAK/B,SAAWL,QAAS0B,IAC5C,uBAAGS,QAASC,KAAKnB,WAAjB,4BACA,gDAAM,8BAAOU,IACb,0CAAMC,S,GA7GHmC,e,EAoHPnE","file":"static/js/7.b90bae95.chunk.js","sourcesContent":["import React, {Component} from \"react\"\r\n\r\nimport \"./index.scss\";\r\n// import {Head} from \"&/components/head\";\r\nimport {history} from \"~\";\r\nimport {NavBar,Icon} from \"antd-mobile\";\r\n\r\nimport ShopCar from \"&/mobx/shopcar\";\r\n\r\nimport {Checkbox} from \"antd-mobile\";\r\nimport {observer } from \"mobx-react\"\r\n\r\n\r\n@observer\r\nclass Shopping extends Component{\r\n\r\n    \r\n    componentDidMount(){\r\n        ShopCar.getCarList();\r\n        // if(!ShopCar.carList.length>0){\r\n        //     ShopCar.getCarList();\r\n        // }\r\n        if(!sessionStorage.mobile){\r\n            history.push(\"/login\");\r\n        }\r\n    }\r\n\r\n    checkOne=(e)=>{\r\n        \r\n        var checked = e.target.checked;\r\n        var goodId  = e.target.goodId;\r\n        // console.log(goodId);\r\n        ShopCar.changeCheckOne(checked,goodId);\r\n    }\r\n\r\n    checkAll=(e)=>{\r\n        ShopCar.changeQuan(e.target.checked)\r\n    }\r\n\r\n    reduce=(goodId,count)=>{\r\n        if(count>1){\r\n            ShopCar.changeOneCount(goodId,false);\r\n            location.reload();\r\n        }\r\n    }\r\n\r\n    add = (goodId,count)=>{\r\n        if(count<100){\r\n            ShopCar.changeOneCount(goodId,true);\r\n        }\r\n    }\r\n\r\n    changeCount=(goodId,v)=>{\r\n        var count = v.target.value;\r\n        if(count>1&&count<100){\r\n            ShopCar.changeCountByGoodId(goodId,count*1)\r\n        }\r\n    }\r\n\r\n    delSelect=()=>{\r\n        ShopCar.delGoodBySelect();\r\n    }\r\n\r\n    goBack=()=>{\r\n        history.push('/main/sort');\r\n    }\r\n\r\n    render(){\r\n        \r\n        const {\r\n            carList,\r\n            quan,\r\n            total,\r\n            checkNum\r\n        }= ShopCar;\r\n        return(\r\n            <div>\r\n                {/* <Head title=\"购物车\" show=\"true\" ></Head> */}\r\n                <div className=\"header\">\r\n                    <NavBar  style={{backgroundColor:'#e32332'}}\r\n                    mode=\"light\"\r\n                    \r\n                    leftContent={[\r\n                        <img key='0' onClick={this.goBack} style={{width:\"15px\",height:\"20px\"}} src=\"http://static.wanmei.com/shop/mobile/images/icon_back.png\"/>\r\n                        \r\n                        \r\n                    ]}\r\n                    onLeftClick={() => console.log('onLeftClick')}\r\n                    rightContent={[\r\n                        <Icon key=\"0\" type=\"search\" style={{ marginRight: '16px' ,color:'#fff'}} />\r\n                    ]}\r\n                >\r\n                    <p key=\"1\" style={{fontSize:\"16px\",color:\"#fff\",padding:\"8px\",width:'40px'}}>购物车</p>\r\n                </NavBar>\r\n                </div>\r\n                <ul className=\"glist\">\r\n                    {\r\n                        carList.map((i,index)=>{\r\n                            return (\r\n                    <li key={index} id={i._id}>\r\n                                <Checkbox\r\n                                checked={i.checked} \r\n                                goodId={i.goodId} \r\n                                onChange={this.checkOne} >\r\n                                ></Checkbox>\r\n                                <img src={i.goodImg} alt=\"\"/>\r\n                                <h3>姜小虎——{i.goodName}</h3>\r\n                                <p>￥{i.goodPrice}</p>\r\n                                <span className=\"jianNum\" onClick={() => this.reduce(i.goodId, i.count)}>-</span>\r\n                                <span className=\"num\" >\r\n                                    <input goodsid={i.goodId} type=\"text\" value={i.count} onChange={(v) => { this.changeCount(i.goodId, v) }} style={{ width: \"14px\", fontSize: '8px', textAlign: 'center', background: 'none', border: '0' }}/>\r\n                                </span>\r\n                                <span className=\"jiaNum\" onClick={() => this.add(i.goodId, i.count)}>+</span>\r\n                            </li>\r\n                            )\r\n                        })\r\n                    }\r\n                    \r\n                </ul>\r\n                <div className=\"shopFoot\">\r\n                    <Checkbox onClick={this.checkAll}  checked={quan}></Checkbox>\r\n                    <p onClick={this.delSelect}>删除选中</p>\r\n                    <p>总价：<span>{total}</span></p>\r\n                    <p>下单{checkNum}</p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default  Shopping\r\n\r\n{/* <li>\r\n    <Checkbox></Checkbox>\r\n    <img src=\"http://img.shop.wanmei.com/upload/product/2016-09-12/929eaadb-33e3-4ee7-a216-eeb8161ef533.jpg\" alt=\"\"/>\r\n    <h3>姜小虎——福袋</h3>\r\n    <p> ￥12</p>\r\n    <span className=\"jianNum\">-</span>\r\n    <span className=\"num\">1</span>\r\n    <span className=\"jiaNum\">+</span>\r\n</li>\r\n<li>\r\n    <Checkbox></Checkbox>\r\n    <img src=\"http://img.shop.wanmei.com/upload/product/2016-09-12/929eaadb-33e3-4ee7-a216-eeb8161ef533.jpg\" alt=\"\"/>\r\n    <h3>姜小虎——福袋</h3>\r\n    <p>￥12</p>\r\n    <span className=\"jianNum\">-</span>\r\n    <span className=\"num\">1</span>\r\n    <span className=\"jiaNum\">+</span>\r\n</li> */}"],"sourceRoot":""}