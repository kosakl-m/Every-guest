{"version":3,"sources":["utils/lazyload.js","scripts/components/foot/index.js","scripts/views/main/index.js","scripts/views/login/index.js","scripts/views/search/index.js","scripts/views/sortshopping/index.js","scripts/views/shopdetail/index.js","scripts/views/index.js","scripts/index.js","App.js","serviceWorker.js","index.js","scripts/components/head/index.js","utils/axios.js","utils/history.js","utils/index.js","scripts/mobx/shopcar.js"],"names":["loadingComponent","loader","loading","Loadable","foots","txt","path","name","icon","Foot","state","this","map","foot","i","key","NavLink","to","activeClassName","className","text","ShopCar","carNum","hot","style","marginLeft","Component","Main","width","height","Switch","Route","exact","render","Redirect","component","LazyLoad","history","props","mobileReg","codeReg","Login","todoLogin","axios","post","mobile","value","code","then","res","console","log","data","sessionStorage","token","push","sendCode","computedTime","checkMobile","toggle","setState","mobileFlag","test","loginFlag","count","mFlag","timer","setInterval","clearInterval","checkCode","backgroundColor","mode","leftContent","onLeftClick","rightContent","fontSize","color","padding","type","placeholder","clear","ref","el","onChange","disabled","onClick","size","inline","Search","SortShopping","goods","result","title","show","src","alt","lineHeight","textAlign","background","val","Link","pathname","query","goodId","goodImg","goodName","goodPrice","alert","ShopDetail","jianNum","jNum","num","innerText","jiaNum","aNum","goShopping","gId","location","uMobile","gDetail","onPress","replace","goBuy","goodimg","ele","Layout","MainRouter","HashRouter","basename","App","Boolean","window","hostname","match","document","getElementById","ReactDOM","navigator","serviceWorker","ready","registration","unregister","Head","goBack","go","display","marginRight","defaults","baseURL","headers","common","interceptors","request","use","config","error","Promise","reject","response","createHashHistory","require","carList","forEach","item","checked","flag","newval","observable","action","computed","filter"],"mappings":"ihBAOMA,EAAkB,WACpB,OACI,yCAKO,WAACC,GAAqC,IAA9BC,EAA6B,uDAAnBF,EAC7B,OAAOG,IAAS,CACZF,SACAC,a,qDCRKE,EAAQ,CACjB,CAACC,IAAI,eAAKC,KAAK,aAAaC,KAAK,OAAOC,KAAK,aAC7C,CAACH,IAAI,eAAKC,KAAK,aAAaC,KAAK,OAAOC,KAAK,eAC7C,CAACH,IAAI,qBAAMC,KAAK,iBAAiBC,KAAK,WAAWC,KAAK,0BACtD,CAACH,IAAI,eAAKC,KAAK,aAAaC,KAAK,OAAOC,KAAK,uBAGpCC,EAAb,2MACIC,MAAQ,CACJN,SAFR,wEAKQ,OACI,gCAEQO,KAAKD,MAAMN,MAAMQ,KAAI,SAACC,EAAKC,GACvB,OACI,yBAAKC,IAAKD,GACN,kBAACE,EAAA,EAAD,CACAC,GAAIJ,EAAKP,KACTY,gBAAgB,cAEZ,uBAAGC,UAAW,YAAYN,EAAKL,OAC/B,8BAAOK,EAAKR,KACR,GAAHS,GAAM,uBAAOM,KAAMC,IAAQC,OAAQH,UAAU,MAAMI,KAAG,EAACC,MAAO,CAACC,WAAW,eAjB/G,GAA0BC,aCCbC,EAAb,iLAEQ,OACI,yBAAKR,UAAU,OAAOK,MAAO,CAACI,MAAM,QAAQC,OAAO,UAC/C,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAOzB,KAAK,SAAS0B,OAAK,EAACC,OAAQ,kBAAK,kBAACC,EAAA,EAAD,CAAUjB,GAAG,kBACrD,kBAACc,EAAA,EAAD,CAAOzB,KAAK,aAAa6B,UAAWC,GAAS,kBAAK,yDAClD,kBAACL,EAAA,EAAD,CAAOzB,KAAK,aAAa6B,UAAWC,GAAS,kBAAK,mCAClD,kBAACL,EAAA,EAAD,CAAOzB,KAAK,iBAAiB6B,UAAWC,GAAS,kBAAK,yDACtD,kBAACL,EAAA,EAAD,CAAOzB,KAAK,aAAa6B,UAAWC,GAAS,kBAAK,mCAClD,kBAACL,EAAA,EAAD,CAAOE,OAAQ,kBAAK,kBAACC,EAAA,EAAD,CAAUjB,GAAG,mBAErC,kBAAC,EAAD,CAAMoB,QAAS1B,KAAK2B,MAAMD,eAZ1C,GAA0BX,a,kLCTba,EAAW,sBACXC,EAAU,UAGVC,EAAb,YACI,aAAc,IAAD,8BACT,+CAkBJC,UAAU,WACNC,IAAMC,KAAK,mBAAmB,CAC1BC,OAAO,EAAKA,OAAOnC,MAAMoC,MACzBC,KAAK,EAAKA,KAAKrC,MAAMoC,QACtBE,MAAK,SAAAC,GACJC,QAAQC,IAAIF,EAAIG,MAChBC,eAAeC,MAAQL,EAAIG,KAAKE,MAChCD,eAAeR,OAAS,EAAKA,OAAOnC,MAAMoC,MAC1CT,IAAQkB,KAAK,kBA3BR,EAgCbC,SAAS,WAELb,IAAMC,KAAK,kBAAkB,CACzBC,OAAO,EAAKA,OAAOnC,MAAMoC,QAC1BE,MAAK,SAAAC,OAGR,EAAKQ,gBAvCI,EA4CbC,YAAY,SAACb,GAEN,EAAKnC,MAAMiD,QACV,EAAKC,SAAS,CACVC,WAAWtB,EAAUuB,KAAKjB,GAC1BkB,UAAWvB,EAAQsB,KAAK,EAAKf,KAAKrC,MAAMoC,QAAQP,EAAUuB,KAAKjB,MAjD9D,EAyDbY,aAAa,WACT,EAAKG,SAAS,CACVI,QAAQ,EAAKtD,MAAMsD,MACnB3D,IAAI,sBAAD,OAAQ,EAAKK,MAAMsD,MAAnB,MACHH,YAAW,EACXI,OAAM,IAGV,IAAIC,EAAQC,aAAY,WACjB,EAAKzD,MAAMsD,MAAM,EAChB,EAAKJ,SAAS,CACVI,QAAQ,EAAKtD,MAAMsD,MACnB3D,IAAI,sBAAD,OAAQ,EAAKK,MAAMsD,MAAnB,MACHH,YAAW,EACXF,QAAO,EACPM,OAAM,KAGVG,cAAcF,GACd,EAAKN,SAAS,CACVI,MAAM,GACN3D,IAAI,iCACJwD,YAAW,EACXF,QAAO,EACPM,OAAM,OAGhB,MApFO,EAwFbI,UAAU,SAACtB,GACP,EAAKa,SAAS,CACVG,UAAWvB,EAAQsB,KAAKf,IAAOR,EAAUuB,KAAK,EAAKjB,OAAOnC,MAAMoC,UAxFpE,EAAKpC,MAAQ,CACTsD,MAAM,GACN3D,IAAI,iCACJ4D,OAAM,EACNJ,YAAW,EACXE,WAAU,EACVJ,QAAO,GARF,EADjB,iFAcYN,eAAeR,QACfR,IAAQkB,KAAK,YAfzB,+BAoGa,IAAD,SAMF5C,KAAKD,MAJHL,EAFA,EAEAA,IACA4D,EAHA,EAGAA,MACAJ,EAJA,EAIAA,WACAE,EALA,EAKAA,UAEJ,OACI,6BAEI,yBAAK5C,UAAU,UACX,uBAASK,MAAO,CAAC8C,gBAAgB,WACjCC,KAAK,QAELC,YAAa,GAKbC,YAAa,kBAAMvB,QAAQC,IAAI,gBAC/BuB,aAAc,IAId,uBAAG3D,IAAI,IAAIS,MAAO,CAACmD,SAAS,OAAOC,MAAM,OAAOC,QAAQ,MAAMjD,MAAM,SAApE,kBAIJ,4BACA,2BACI,2BACA,4BACA,uBACIkD,KAAK,MACLC,YAAY,uCACZC,OAAK,EACLC,IAAK,SAAAC,GAAE,OAAE,EAAKrC,OAAOqC,GACrBC,SAAUxE,KAAK+C,YACf0B,UAAWnB,GANf,sBAQC,4BACD,uBACIa,KAAK,SACLC,YAAY,uCACZC,OAAK,EACLC,IAAK,SAAAC,GAAE,OAAE,EAAKnC,KAAKmC,GACnBC,SAAUxE,KAAK0D,WALnB,sBAOA,uBAAQgB,QAAS1E,KAAK6C,SAAU4B,UAAWvB,EAAYiB,KAAK,UAAU3D,UAAU,QAAQmE,KAAK,QAAQC,QAAM,GAAGlF,GAC9G,6BAEA,4BACA,uBAAQyE,KAAK,UAAUO,QAAS1E,KAAK+B,UAAW0C,UAAWrB,GAA3D,sBAxJpB,GAA2BrC,aCRd8D,G,OAAb,iLAEQ,OACI,6BACI,2CAJhB,GAA4B9D,c,iBCMf+D,EAAb,YAEI,aAAc,IAAD,8BACT,+CACK/E,MAAQ,CACTgF,MAAM,IAHD,EAFjB,iFASwB,IAAD,OACf/C,IAAMC,KAAK,mBAAmBI,MAAK,SAAAC,GAC/BC,QAAQC,IAAIF,EAAIG,KAAKuC,QACrB,EAAK/B,SAAS,CACV8B,MAAMzC,EAAIG,KAAKuC,cAb/B,+BAmBQ,OACI,6BAEI,kBAAC,IAAD,CAAMC,MAAM,qBAAMC,KAAK,SACvB,6BACI,yBAAK1E,UAAU,UAAU2E,IAAI,gGAAgGC,IAAI,MAErI,wBAAIvE,MAAO,CAACI,MAAM,OAAOC,OAAO,OAAOmE,WAAW,OAAOC,UAAU,SAASrB,MAAM,UAAUsB,WAAW,SAAvG,4BACA,wBAAI/E,UAAU,aAENR,KAAKD,MAAMgF,MAAM9E,KAAI,SAACuF,EAAIrF,GACtB,OACI,wBAAIC,IAAKD,GACL,kBAACsF,EAAA,EAAD,CAAMnF,GAAI,CAAEoF,SAAS,cAAcC,MAAM,CAAC/F,KAAK4F,EAAII,UAC/C,yBAAKT,IAAKK,EAAIK,QAAST,IAAI,KAC3B,uBAAG5E,UAAU,QAAb,iCAA0BgF,EAAIM,UAC9B,uBAAGtF,UAAU,SAAb,SAAuBgF,EAAIO,sBAnCnE,GAAkChF,a,kCCDlCiF,MAAQ,IAAMA,MAEP,IAAMC,EAAb,YACI,aAAc,IAAD,8BACT,+CAoBJC,QAAQ,WACJ,IAAMC,EAAwB,EAAnB,EAAKC,IAAIC,UACjBF,EAAK,IACJ,EAAKC,IAAIC,UAAUF,EAAK,IAxBnB,EA4BbG,OAAO,WACH,IAAMC,EAAwB,EAAnB,EAAKH,IAAIC,UACpB,EAAKD,IAAIC,UAAUE,EAAK,GA9Bf,EAmCbC,WAAW,WACP,IAAMC,EAAI,EAAK9E,MAAM+E,SAASf,MAAM/F,KAC9B+G,EAAQjE,eAAeR,OAG7BF,IAAMC,KAAK,sBAAsB,CAC7BwE,MACAvE,OAAOyE,EACPtD,MAAyB,EAAnB,EAAK+C,IAAIC,UACfR,QAAQ,EAAK9F,MAAM6G,QAAQf,QAC3BC,SAAS,EAAK/F,MAAM6G,QAAQd,SAC5BC,UAAU,EAAKhG,MAAM6G,QAAQb,YAC9B1D,MAAK,SAAAC,GACJC,QAAQC,IAAIF,EAAIG,MACMuD,MAAM,GAAI,mDAAY,CACxC,CAAEvF,KAAM,SAAKoG,QAAS,kBAAMtE,QAAQC,IAAI,WAAW3B,MAAO,WAC1D,CAAEJ,KAAM,SAAKoG,QAAS,WAAOnF,IAAQoF,QAAQ,0BAnD5C,EA0DbC,MAAM,WACF,IAAMN,EAAI,EAAK9E,MAAM+E,SAASf,MAAM/F,KAC9B+G,EAAQjE,eAAeR,OAC7BK,QAAQC,IAAI,EAAKwE,SACjBhF,IAAMC,KAAK,sBAAsB,CAC7BwE,MACAvE,OAAOyE,EACPtD,MAAyB,EAAnB,EAAK+C,IAAIC,UACfR,QAAQ,EAAK9F,MAAM6G,QAAQf,QAC3BC,SAAS,EAAK/F,MAAM6G,QAAQd,SAC5BC,UAAU,EAAKhG,MAAM6G,QAAQb,YAC9B1D,MAAK,SAAAC,GACJC,QAAQC,IAAIF,EAAIG,MAChBf,IAAQkB,KAAK,sBArEjB,EAAK7C,MAAM,CACP6G,QAAQ,IAHH,EADjB,iFASwB,IAAD,OAETH,EAAIzG,KAAK2B,MAAM+E,SAASf,MAAM/F,KACpCoC,IAAMC,KAAK,oBAAoB,CAC3BwE,QACDpE,MAAK,SAAAC,GAEJ,EAAKW,SAAS,CACV2D,QAAQtE,EAAIG,KAAKuC,cAjBjC,+BA4Ea,IAAD,OAGA4B,EACA5G,KAAKD,MADL6G,QAEJ,OACI,yBAAK/F,MAAO,CAACI,MAAO,SAChB,kBAAC,IAAD,CAAMgE,MAAM,eAAKC,KAAK,SACtB,yBAAK1E,UAAU,UACX,yBAAK2E,IAAKyB,EAAQf,QAAST,IAAI,KAC/B,6DAAS,8BAAOwB,EAAQd,WACxB,4DAASc,EAAQhB,QACjB,qCAAM,8BAAOgB,EAAQb,YACrB,4BACI,8DAGA,iDACI,0BAAMvF,UAAU,QAAhB,aAEJ,iDACI,0BAAMA,UAAU,OAAOkE,QAAS1E,KAAKkG,SAArC,KACA,0BAAM1F,UAAU,MAAM8D,IAAK,SAAA2C,GAAG,OAAE,EAAKb,IAAIa,IAAzC,KACA,0BAAMzG,UAAU,OAAOkE,QAAS1E,KAAKsG,QAArC,QAIZ,yBAAK9F,UAAU,gBACX,0BAAMA,UAAU,cAChB,uBAAQkE,QAAS1E,KAAKwG,YAAtB,mCAGA,0BAAMhG,UAAU,QAAQkE,QAAS1E,KAAK+G,OAAtC,kCA5GpB,GAAgChG,aCGnBmG,EAAb,iLAQQ,OACI,kBAAC/F,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQzB,KAAK,IAAI0B,OAAK,EAACC,OAAQ,kBAAK,kBAACC,EAAA,EAAD,CAAUjB,GAAG,kBACjD,kBAACc,EAAA,EAAD,CAAQzB,KAAK,QAAQ6B,UAAWR,IAChC,kBAACI,EAAA,EAAD,CAAQzB,KAAK,SAAS6B,UAAWM,IACjC,kBAACV,EAAA,EAAD,CAAQzB,KAAK,UAAU6B,UAAWqD,IAClC,kBAACzD,EAAA,EAAD,CAAQzB,KAAK,gBAAgB6B,UAAWsD,IACxC,kBAAC1D,EAAA,EAAD,CAAQzB,KAAK,cAAc6B,UAAWyE,IAEtC,kBAAC7E,EAAA,EAAD,CAAOE,OAAQ,kBAAK,kBAACC,EAAA,EAAD,CAAUjB,GAAG,uBAjBjD,GAA4BS,aCPfoG,EAAb,iLAEQ,OACI,kBAACC,EAAA,EAAD,CACIC,SAAS,IAGT,kBAACjG,EAAA,EAAD,CAAQI,UAAW0F,SAPnC,GAAgCnG,aCOjBuG,MARf,WACE,OACE,yBAAK9G,UAAU,OACX,kBAAC,EAAD,QCGY+G,QACW,cAA7BC,OAAOd,SAASe,UAEe,UAA7BD,OAAOd,SAASe,UAEhBD,OAAOd,SAASe,SAASC,MACvB,2D,OCRNpG,iBAAO,kBAAC,EAAD,MAASqG,SAASC,eAAe,SAExCC,IAASvG,OAAO,kBAAC,EAAD,MAASqG,SAASC,eAAe,SDqH3C,kBAAmBE,WACrBA,UAAUC,cAAcC,MAAM3F,MAAK,SAAA4F,GACjCA,EAAaC,iB,4LE5HNC,EAAb,2MAEIC,OAAO,WACH1G,IAAQ2G,IAAI,IAHpB,wEAMc,IAAD,EAKDrI,KAAK2B,MAFLsD,EAHC,EAGDA,MACAC,EAJC,EAIDA,KAGJ,OACI,yBAAK1E,UAAU,UACX,uBAASK,MAAO,CAAC8C,gBAAgB,WACjCC,KAAK,QAELC,YAAa,CACRqB,EAAwI,yBAAK9E,IAAI,IAAIsE,QAAS1E,KAAKoI,OAAQvH,MAAO,CAACI,MAAM,OAAOC,OAAO,QAASiE,IAAI,8DAA/M,yBAAK/E,IAAI,IAAIS,MAAO,CAACyH,QAAQ,QAAQrH,MAAM,OAAOC,OAAO,QAASiE,IAAI,8DAIhFrB,YAAa,kBAAMvB,QAAQC,IAAI,gBAC/BuB,aAAc,CACV,uBAAM3D,IAAI,IAAI+D,KAAK,SAAStD,MAAO,CAAE0H,YAAa,OAAQtE,MAAM,YAGpE,uBAAG7D,IAAI,IAAIS,MAAO,CAACmD,SAAS,OAAOC,MAAM,OAAOC,QAAQ,MAAMjD,MAAM,SAAUgE,SA5B9F,GAA0BlE,c,oDCDtB4B,EAAQ,GACZX,IAAMwG,SAASC,QAAU,6BACzBzG,IAAMwG,SAASE,QAAQC,OAAvB,MAAyChG,EACzCX,IAAMwG,SAASE,QAAQzG,KAAK,gBAAkB,oCA2B9CD,IAAM4G,aAAaC,QAAQC,KAAI,SAAUC,GAKvC,OAFApG,EAAQD,eAAeC,MACvBoG,EAAOL,QAAP,MAA0B/F,EACnBoG,KAEN,SAAUC,GAGX,OAAOC,QAAQC,OAAOF,MAMxBhH,IAAM4G,aAAaO,SAASL,KAAI,SAAUK,GAMtC,OAJA5G,QAAQC,IAAI2G,GAILA,KAEN,SAAUH,GAEX,OAAOC,QAAQC,OAAOF,M,IC3DZtH,EAAU,I,MAAI0H,GCA5B,sEAIYC,EAAQ,M,oICJd3I,G,ggBAyImBsB,IAAMC,KAAK,oBAAoB,CAC5CC,OAAOQ,eAAeR,S,4IA1G1B,IAAIkE,EAAM,EAIV,OAHApG,KAAKsJ,QAAQC,SAAQ,SAAAC,GACjBpD,GAAKoD,EAAKnG,SAEP+C,I,+BAIP,IAAIA,EAAM,EAMV,OALApG,KAAKsJ,QAAQC,SAAQ,SAAAC,GACdA,EAAKC,UACJrD,GAAKoD,EAAKnG,UAGX+C,I,4BAIP,IAAIA,EAAM,EAMV,OALApG,KAAKsJ,QAAQC,SAAQ,SAAAC,GACdA,EAAKC,UACJrD,GAAKoD,EAAKnG,MAAQmG,EAAKzD,cAGxBK,I,2BAIP,IAAIsD,GAAO,EAMX,OALA1J,KAAKsJ,QAAQC,SAAQ,SAAAC,GACbA,EAAKC,UACLC,GAAO,MAGRA,G,aAGFC,GACL3J,KAAKsJ,QAAUtJ,KAAKsJ,QAAQrJ,KAAI,SAACuJ,GAE7B,OADAA,EAAKC,QAAUE,EACRH,S,0CAvEdI,K,wEAAqB,M,wCAOrBC,K,oFAAmB,WAChB7H,IAAMC,KAAK,oBAAoB,CAC3BC,OAAOQ,eAAeR,SACvBG,MAAK,SAAAC,GACJ,EAAKgH,QAAUhH,EAAIG,KAAKuC,c,4CAI/B6E,K,oFAAsB,SAACJ,EAAQ7D,GAE5B5D,IAAMC,KAAK,uBAAuB,CAC9BwH,UAAQ7D,SAAO1D,OAAOQ,eAAeR,SACtCG,MAAK,SAAAC,GACJ,EAAKgH,QAAU,EAAKA,QAAQrJ,KAAI,SAACuJ,GAI7B,OAHGA,EAAK5D,QAAQA,IACZ4D,EAAKC,QAAUA,GAEZD,Y,kCAMlBM,K,uGAQAA,K,sGAUAA,K,kGAUAA,K,yGAiBAD,K,oFAAoB,SAAAJ,GACjBzH,IAAMC,KAAK,uBAAuB,CAC9BwH,UACA7D,OAAO,KACP1D,OAAOQ,eAAeR,SACvBG,MAAK,SAAAC,GACJ,EAAKgH,QAAU,EAAKA,QAAQrJ,KAAI,SAACuJ,GAE7B,OADAA,EAAKC,QAAUA,EACRD,Y,4CAKlBK,K,oFAAwB,SAACjE,EAAO8D,GAC7B1H,IAAMC,KAAK,qBAAqB,CAC5ByH,OACA9D,SACAvC,MAAM,KACNnB,OAAOQ,eAAeR,SACvBG,MAAK,SAAAC,GACJ,EAAKgH,QAAU,EAAKA,QAAQrJ,KAAI,SAACuJ,GAI7B,OAHGA,EAAK5D,QAAUA,IACd4D,EAAKnG,OAASqG,EAAO,GAAI,GAEtBF,Y,iDAMlBK,K,oFAA6B,SAACjE,EAAOvC,GAClCrB,IAAMC,KAAK,qBAAqB,CAC5B2D,SACAvC,QACAnB,OAAOQ,eAAeR,SACvBG,MAAK,SAAAC,GACJ,EAAKgH,QAAU,EAAKA,QAAQrJ,KAAI,SAACuJ,GAI7B,OAHGA,EAAK5D,QAAUA,IACd4D,EAAKnG,MAAgB,EAARA,GAEVmG,Y,6CAMlBK,K,oFAAyB,WACtB7H,IAAMC,KAAK,mBAAmB,CAC1BC,OAAOQ,eAAeR,SACvBG,MAAK,SAAAC,GACJ,EAAKgH,QAAU,EAAKA,QAAQS,QAAO,SAAAP,GAAI,OAAGA,EAAKC,kB,GAkB5C,QAAI/I,I","file":"static/js/main.2e9eea34.chunk.js","sourcesContent":["\r\n// 路由懒加载 \r\n\r\nimport React from 'react';\r\nimport Loadable from 'react-loadable';\r\n\r\n//通用的过场组件 组件加载之前的动画 \r\nconst loadingComponent =()=>{\r\n    return (\r\n        <div>loading</div>\r\n    ) \r\n}\r\n\r\n//过场组件默认采用通用的，若传入了loading，则采用传入的过场组件\r\nexport default (loader,loading = loadingComponent)=>{\r\n    return Loadable({\r\n        loader,   // 需要懒加载的组件 \r\n        loading\r\n    });\r\n}","\r\n\r\nimport React,{Component} from \"react\";\r\n\r\nimport \"./index.scss\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {Badge} from \"antd-mobile\";\r\nimport ShopCar from \"&/mobx/shopcar\";\r\n\r\nexport const foots = [\r\n    {txt:\"首页\",path:\"/main/home\",name:'home',icon:\"icon-home\"},\r\n    {txt:\"分类\",path:'/main/sort',name:\"sort\",icon:\"icon-fenlei\"},\r\n    {txt:\"购物车\",path:\"/main/shopping\",name:\"shopping\",icon:\"icon-tubiaozhizuomoban\"},\r\n    {txt:\"我的\",path:\"/main/mine\",name:\"mine\",icon:\"icon-renyuanguanli\"}\r\n]\r\n\r\nexport class Foot extends Component{\r\n    state = {\r\n        foots\r\n    }\r\n    render(){\r\n        return(\r\n            <footer>\r\n                {\r\n                    this.state.foots.map((foot,i)=>{\r\n                        return(\r\n                            <div key={i}>\r\n                                <NavLink\r\n                                to={foot.path}  \r\n                                activeClassName=\"nav-active\"\r\n                                >\r\n                                    <i className={\"iconfont \"+foot.icon}></i>\r\n                                    <span>{foot.txt}</span>\r\n                                    {i==2&&<Badge text={ShopCar.carNum} className=\"hot\" hot style={{marginLeft:5}} />}\r\n                                </NavLink>\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </footer>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, {Component} from \"react\"\r\n\r\nimport \"./index.scss\";\r\n\r\nimport {Switch,Route,Redirect} from \"react-router-dom\";\r\n\r\n// import { Home } from \"../home\";\r\n// import { Sort } from \"../sort\";\r\n// import Shopping from \"../mine\";\r\nimport LazyLoad from \"~/lazyload\"\r\n\r\nimport {Foot} from \"../../components/foot\"\r\n\r\n\r\n\r\nexport class Main extends Component{\r\n    render(){\r\n        return (\r\n            <div className=\"main\" style={{width:'100vw',height:'100vh'}}>\r\n                <Switch>\r\n                    <Route path=\"/main/\" exact render={()=>(<Redirect to=\"/main/home\"/>)} />\r\n                    <Route path=\"/main/home\" component={LazyLoad(()=>(import(\"../home\")))}/>\r\n                    <Route path=\"/main/sort\" component={LazyLoad(()=>(import(\"../sort\")))}/>\r\n                    <Route path=\"/main/shopping\" component={LazyLoad(()=>(import(\"../shopping\")))}/>\r\n                    <Route path=\"/main/mine\" component={LazyLoad(()=>(import(\"../mine\")))}/>\r\n                    <Route render={()=>(<Redirect to=\"/main/home\"/>)}/>\r\n                </Switch>\r\n                <Foot history={this.props.history}></Foot>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, {Component} from \"react\"\r\n\r\nimport \"./index.scss\";\r\nimport {Head} from \"&/components/head\";\r\nimport {WhiteSpace,WingBlank,List,InputItem,Button,NavBar,Icon} from \"antd-mobile\";\r\nimport {axios,history} from \"~\"\r\n\r\n//正则验证\r\nexport const mobileReg =/^1(3|5|7|8|9)\\d{9}$/;\r\nexport const codeReg = /^\\d{4}$/\r\n\r\nvar timer = null;\r\nexport class Login extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            count:60,\r\n            txt:\"发送验证码\",\r\n            mFlag:true,\r\n            mobileFlag:false,\r\n            loginFlag:false,\r\n            toggle:true\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(!sessionStorage.mobile){\r\n            history.push(\"/login\");\r\n        }\r\n    }\r\n\r\n    //校验验证码\r\n    todoLogin=()=>{\r\n        axios.post(\"/react/checkCode\",{\r\n            mobile:this.mobile.state.value,\r\n            code:this.code.state.value\r\n        }).then(res=>{\r\n            console.log(res.data)\r\n            sessionStorage.token = res.data.token; \r\n            sessionStorage.mobile = this.mobile.state.value\r\n            history.push(\"/main/home\");\r\n        })\r\n    }\r\n\r\n    // 发送验证码\r\n    sendCode=()=>{\r\n\r\n        axios.post(\"/react/sendCode\",{\r\n            mobile:this.mobile.state.value\r\n        }).then(res=>{\r\n           \r\n        })\r\n        this.computedTime();\r\n    }\r\n\r\n\r\n    //校验手机号\r\n    checkMobile=(mobile)=>{\r\n\r\n        if(this.state.toggle){\r\n            this.setState({\r\n                mobileFlag:mobileReg.test(mobile),\r\n                loginFlag:(codeReg.test(this.code.state.value)&&mobileReg.test(mobile))\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n\r\n    //验证码倒计时\r\n    computedTime=()=>{\r\n        this.setState({\r\n            count:--this.state.count,\r\n            txt:`倒计时 ${this.state.count} S`,\r\n            mobileFlag:false,\r\n            mFlag:false\r\n        })\r\n\r\n        var timer = setInterval(()=>{\r\n            if(this.state.count>0){\r\n                this.setState({\r\n                    count:--this.state.count,\r\n                    txt:`倒计时 ${this.state.count} S`,\r\n                    mobileFlag:false,\r\n                    toggle:false,\r\n                    mFlag:false\r\n                })\r\n            }else{\r\n                clearInterval(timer);\r\n                this.setState({\r\n                    count:60,\r\n                    txt:\"发送验证码\",\r\n                    mobileFlag:true,\r\n                    toggle:true,\r\n                    mFlag:true\r\n                })\r\n            }\r\n        },1000)\r\n    }\r\n\r\n    //登录判断\r\n    checkCode=(code)=>{\r\n        this.setState({\r\n            loginFlag:(codeReg.test(code)&&mobileReg.test(this.mobile.state.value))\r\n        })\r\n    }\r\n\r\n    // goBack=()=>{\r\n    //     history.push(\"/main/home\");\r\n    // }\r\n\r\n\r\n    render(){\r\n        const {\r\n            txt,\r\n            mFlag,\r\n            mobileFlag,\r\n            loginFlag\r\n        }=this.state;\r\n        return(\r\n            <div>\r\n\r\n                <div className=\"header\">\r\n                    <NavBar  style={{backgroundColor:'#e32332'}}\r\n                    mode=\"light\"\r\n                    \r\n                    leftContent={[\r\n                        // <img key='0' onClick={this.goBack} style={{width:\"15px\",height:\"20px\"}} src=\"http://static.wanmei.com/shop/mobile/images/icon_back.png\"/>\r\n                        \r\n                        \r\n                    ]}\r\n                    onLeftClick={() => console.log('onLeftClick')}\r\n                    rightContent={[\r\n                        // <Icon key=\"0\" type=\"search\" style={{ marginRight: '16px' ,color:'#fff'}} />\r\n                    ]}\r\n                >\r\n                    <p key=\"1\" style={{fontSize:\"16px\",color:\"#fff\",padding:\"8px\",width:'40px'}}>登录</p>\r\n                </NavBar>\r\n                </div>\r\n\r\n                <WhiteSpace/>\r\n                <WingBlank>\r\n                    <List>\r\n                    <WhiteSpace/>\r\n                    <InputItem\r\n                        type=\"tel\"\r\n                        placeholder=\"请输入手机号\"\r\n                        clear\r\n                        ref={el=>this.mobile=el}\r\n                        onChange={this.checkMobile}\r\n                        disabled={!mFlag}\r\n                    >手机号</InputItem>\r\n                     <WhiteSpace/>\r\n                    <InputItem\r\n                        type=\"number\"\r\n                        placeholder=\"请输入验证码\"\r\n                        clear\r\n                        ref={el=>this.code=el}\r\n                        onChange={this.checkCode}\r\n                    >验证码</InputItem>\r\n                    <Button onClick={this.sendCode} disabled={!mobileFlag} type=\"warning\" className=\"l-btn\" size=\"large\" inline >{txt}</Button>\r\n                    <WhiteSpace/>\r\n                    </List>\r\n                    <WhiteSpace/>\r\n                    <Button type=\"warning\" onClick={this.todoLogin} disabled={!loginFlag} >登录</Button>\r\n                </WingBlank>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, {Component} from \"react\"\r\n\r\nimport \"./index.scss\";\r\n\r\nexport class Search extends Component{\r\n    render(){\r\n        return(\r\n            <div>\r\n                <h1>Search</h1>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","\r\nimport React,{Component} from \"react\";\r\n\r\nimport \"./index.scss\";\r\n\r\nimport {Head} from \"../../components/head\";\r\nimport {Link}  from \"react-router-dom\";\r\n\r\nimport {axios,history} from \"~\";\r\n\r\nexport class SortShopping extends Component{\r\n\r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            goods:[]\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        axios.post(\"/react/goodList\").then(res=>{\r\n            console.log(res.data.result);\r\n            this.setState({\r\n                goods:res.data.result\r\n            })\r\n        })\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                \r\n                <Head title=\"姜小虎\" show=\"true\"></Head>\r\n                <div>\r\n                    <img className=\"headimg\" src=\"http://img.shop.wanmei.com/upload/moduleCover/2017-07-20/bb56c97b22804e35be8d838b8ebaa6de.jpg\" alt=\"\"/>\r\n                </div>\r\n                <h2 style={{width:\"100%\",height:\"50px\",lineHeight:\"50px\",textAlign:\"center\",color:\"#ffd253\",background:\"#fff\"}}>热销推荐</h2>\r\n                <ul className=\"goodslist\">\r\n                    {\r\n                        this.state.goods.map((val,i) =>{\r\n                            return (\r\n                                <li key={i} >\r\n                                    <Link to={{ pathname:'/shopdetail',query:{name:val.goodId}}}>\r\n                                        <img src={val.goodImg} alt=\"\"/>\r\n                                        <p className=\"name\">姜小虎——{val.goodName}</p>\r\n                                        <p className=\"price\">￥{val.goodPrice}</p>\r\n                                    </Link>\r\n                                </li>\r\n                            )\r\n                        })\r\n                    }\r\n\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\nimport React, {Component} from \"react\";\r\n\r\nimport \"./index.scss\";\r\n\r\nimport {Head} from \"../../components/head\"\r\nimport {axios,history} from \"~\";\r\nimport {Modal,Button} from 'antd-mobile';\r\n\r\nalert = Modal.alert;\r\n\r\nexport class ShopDetail extends Component{\r\n    constructor(){\r\n        super()\r\n        this.state={\r\n            gDetail:[]\r\n        }\r\n    }\r\n    \r\n    \r\n    componentDidMount(){\r\n        // console.log(this.props.location.query.name)\r\n        const gId=this.props.location.query.name;\r\n        axios.post(\"/react/gooddetail\",{\r\n            gId\r\n        }).then(res=>{\r\n            // console.log(res.data.result);\r\n            this.setState({\r\n                gDetail:res.data.result\r\n            })\r\n        })\r\n    }\r\n\r\n    jianNum=()=>{\r\n        const jNum=this.num.innerText*1\r\n        if(jNum>1){\r\n            this.num.innerText=jNum-1;\r\n        }\r\n    }\r\n\r\n    jiaNum=()=>{\r\n        const aNum=this.num.innerText*1\r\n        this.num.innerText=aNum+1;\r\n    }\r\n\r\n   \r\n\r\n    goShopping=()=>{\r\n        const gId=this.props.location.query.name;\r\n        const uMobile=sessionStorage.mobile;\r\n        // console.log(this.state.gDetail);\r\n        // console.log(this.num.innerText);\r\n        axios.post(\"/react/usershopping\",{\r\n            gId,\r\n            mobile:uMobile,\r\n            count:this.num.innerText*1,\r\n            goodImg:this.state.gDetail.goodImg,\r\n            goodName:this.state.gDetail.goodName,\r\n            goodPrice:this.state.gDetail.goodPrice\r\n        }).then(res=>{\r\n            console.log(res.data);\r\n            const alertInstance = alert('', '是否前往购物车？', [\r\n                { text: '否', onPress: () => console.log('cancel'), style: 'default' },\r\n                { text: '是', onPress: () => {history.replace(\"/main/shopping\")} },\r\n            ]);\r\n        })\r\n        \r\n\r\n    }\r\n\r\n    goBuy=()=>{\r\n        const gId=this.props.location.query.name;\r\n        const uMobile=sessionStorage.mobile;\r\n        console.log(this.goodimg);\r\n        axios.post(\"/react/usershopping\",{\r\n            gId,\r\n            mobile:uMobile,\r\n            count:this.num.innerText*1,\r\n            goodImg:this.state.gDetail.goodImg,\r\n            goodName:this.state.gDetail.goodName,\r\n            goodPrice:this.state.gDetail.goodPrice\r\n        }).then(res=>{\r\n            console.log(res.data);\r\n            history.push(\"/main/shopping\");\r\n        })\r\n    }\r\n\r\n    render(){\r\n        // console.log(gDetail)\r\n        const {\r\n            gDetail\r\n        } = this.state\r\n        return(\r\n            <div style={{width: \"100%\"}}>\r\n                <Head title=\"商品\" show=\"true\"></Head>\r\n                <div className=\"detail\">\r\n                    <img src={gDetail.goodImg} alt=\"\"/>\r\n                    <h2>姜小虎——<span>{gDetail.goodName}</span></h2>\r\n                    <p>正版姜小虎{gDetail.goodId}</p>\r\n                    <h3 >￥<span>{gDetail.goodPrice}</span></h3>\r\n                    <ul>\r\n                        <li>产地：北京\r\n\r\n                        </li>\r\n                        <li>运费：\r\n                            <span className=\"yuan\">￥15</span>\r\n                        </li>\r\n                        <li>数量：\r\n                            <span className=\"jNum\" onClick={this.jianNum} >-</span>\r\n                            <span className=\"num\" ref={ele=>this.num=ele}>1</span>\r\n                            <span className=\"aNum\" onClick={this.jiaNum} >+</span>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"detailFooter\">\r\n                    <span className=\"goShopping\" >\r\n                    <Button onClick={this.goShopping}>加入购物车</Button>\r\n                        </span>\r\n\r\n                    <span className=\"goBuy\" onClick={this.goBuy}>立即购买</span>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\n\r\n\r\n\r\nimport {Switch,Route,Redirect } from \"react-router-dom\";\r\nimport React, {Component} from \"react\"\r\nimport { Main } from \"./main\";\r\nimport { Login } from \"./login\";\r\n// import PropTypes from \"prop-types\"\r\nimport { Search } from \"./search\";\r\nimport {SortShopping} from \"./sortshopping\";\r\nimport {ShopDetail} from \"./shopdetail\";\r\n\r\nexport class Layout extends Component{\r\n    // getChildContext(){\r\n    //     return {\r\n    //         history:this.props.history,\r\n    //         location:this.props.location\r\n    //     }\r\n    // }\r\n    render(){\r\n        return (\r\n            <Switch>\r\n                <Route  path=\"/\" exact render={()=>(<Redirect to=\"/main/home\" />)}  />\r\n                <Route  path=\"/main\" component={Main}   />\r\n                <Route  path=\"/login\" component={Login}   />\r\n                <Route  path=\"/search\" component={Search}   />\r\n                <Route  path=\"/sortshopping\" component={SortShopping}/>\r\n                <Route  path=\"/shopdetail\" component={ShopDetail}/>\r\n\r\n                <Route render={()=>(<Redirect to=\"/main/home\"/>)}/>\r\n            </Switch>\r\n        )\r\n    }\r\n}\r\n\r\n// Layout.childContextTypes = {\r\n//     history:PropTypes.object,\r\n//     location:PropTypes.object\r\n// }","\r\n\r\n\r\nimport {HashRouter,Route} from \"react-router-dom\"\r\nimport React, {Component} from \"react\"\r\nimport {Layout} from \"&/views\"\r\n\r\nexport class MainRouter extends Component{\r\n    render(){\r\n        return (\r\n            <HashRouter\r\n                basename=\"\"\r\n                \r\n            >\r\n                <Route  component={Layout} />\r\n            </HashRouter>\r\n        )\r\n    }\r\n}","import React from 'react';\n// import logo from './logo.svg';\nimport './App.css';\n\nimport {MainRouter} from \"&\"\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <MainRouter></MainRouter>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM , {render}  from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// 全局的公共样式 \nimport \"./styles/index.scss\"; \n\n\nrender(<App />, document.getElementById('root'));  // 渲染 DOM \n\nReactDOM.render(<App />, document.getElementById('root'));  // 渲染 DOM \n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\r\nimport React, { Component } from \"react\";\r\nimport './index.scss';\r\n\r\nimport {NavBar,Icon} from \"antd-mobile\";\r\nimport {history} from \"~\"\r\n\r\nexport class Head extends Component {\r\n\r\n    goBack=()=>{\r\n        history.go(-1);\r\n    }\r\n\r\n    render() {\r\n        \r\n        const {\r\n            title,\r\n            show\r\n        } = this.props;\r\n\r\n        return (\r\n            <div className=\"header\">\r\n                <NavBar  style={{backgroundColor:'#e32332'}}\r\n                mode=\"light\"\r\n                \r\n                leftContent={[\r\n                    !show?<img key='0' style={{display:'block',width:'60px',height:'25px'}} src=\"http://www.wanmei.com/zh/images/revision2016/logo_wm.png\"/>:<img key='0' onClick={this.goBack} style={{width:\"15px\",height:\"20px\"}} src=\"http://static.wanmei.com/shop/mobile/images/icon_back.png\"/>\r\n                    \r\n                    \r\n                ]}\r\n                onLeftClick={() => console.log('onLeftClick')}\r\n                rightContent={[\r\n                    <Icon key=\"0\" type=\"search\" style={{ marginRight: '16px' ,color:'#fff'}} />\r\n                ]}\r\n            >\r\n                <p key=\"1\" style={{fontSize:\"16px\",color:\"#fff\",padding:\"8px\",width:'40px'}}>{title}</p>\r\n            </NavBar>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\nimport axios from \"axios\";\r\nimport {Toast} from \"antd-mobile\"\r\nimport {history} from \"~\";\r\n\r\n\r\nvar token = \"\";\r\naxios.defaults.baseURL = \"http://120.24.88.100:1910/\"   // 基路径\r\naxios.defaults.headers.common['token'] = token;     // token 为 空\r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\n\r\n// export function loadingToast(msg) {\r\n//     Toast.loading(msg, 3, () => {\r\n//       console.log('Load complete !!!');\r\n//     });\r\n// }\r\n\r\n// export function successToast(msg) {\r\n//     Toast.hide();\r\n//     Toast.success(msg, 1);\r\n// }\r\n\r\n// export function failToast(msg) {\r\n//   Toast.hide();\r\n//   Toast.fail(msg, 1);\r\n// }\r\n\r\n// export function offline(msg) {\r\n//   Toast.offline(msg, 1);\r\n// }\r\n\r\n\r\n\r\n// axios 拦截器   Interceptors\r\n// 请求 request 拦截器   请求之前业务逻辑 配置 data /headers\r\naxios.interceptors.request.use(function (config) {\r\n  // 请求发送之前做的事情\r\n  // loadingToast(\"努力加载...\");\r\n  token = sessionStorage.token;\r\n  config.headers['token'] = token;\r\n  return config;\r\n\r\n}, function (error) {\r\n  // 请求发送 失败 \r\n  // offline(\"请求失败---网络错误!\")\r\n  return Promise.reject(error);\r\n  \r\n});\r\n\r\n\r\n// 响应 response 拦截器   根据返回的状态码 做对应的业务逻辑 \r\naxios.interceptors.response.use(function (response) {\r\n    // 获取到响应数据做的事情\r\n    console.log(response);\r\n    // setTimeout(()=>{\r\n    //   successToast(response.data.msg);\r\n    // },1000)\r\n    return response;\r\n\r\n  }, function (error) {\r\n    // failToast(\"服务器error-响应失败!!!\");\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\n\r\n\r\nexport {axios}\r\n\r\n","\r\nimport {createHashHistory} from \"history\";\r\n\r\nexport const  history = new createHashHistory();","\r\n\r\n\r\n// 一个模块暴露多个接口 \r\n\r\nexport {axios} from \"./axios\"\r\n\r\nconst url = require(\"url\"); // Node 自带\r\n\r\nexport function getQuery(search){\r\n    return url.parse(search,true).query;\r\n}\r\n\r\n\r\n\r\nexport {history} from \"./history\"","\r\nimport {observable,action,computed} from \"mobx\"\r\nimport {axios} from \"~\";\r\nclass ShopCar{\r\n    @observable carList = [];   // 购物车商品数据\r\n    // @observable total = 0;      // 购物车 商品总价格\r\n    // @observable carNum = 0;     // 购物车 商品数量 \r\n    // @observable checkNum = 0;     // 购物车 选中商品数量\r\n    // @observable quan = false;     // 判断是否全部选中 \r\n\r\n\r\n    @action getCarList =()=>{\r\n        axios.post(\"/react/getCarList\",{\r\n            mobile:sessionStorage.mobile\r\n        }).then(res=>{\r\n            this.carList = res.data.result;\r\n        })\r\n    }\r\n\r\n    @action changeCheckOne=(checked,goodId)=>{\r\n        // 修改单条选中 \r\n        axios.post(\"/react/changechecked\",{\r\n            checked,goodId,mobile:sessionStorage.mobile\r\n        }).then(res=>{\r\n            this.carList = this.carList.map((item)=>{\r\n                if(item.goodId==goodId){\r\n                    item.checked = checked;\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n        \r\n    }\r\n\r\n    @computed get carNum(){\r\n        var num = 0;\r\n        this.carList.forEach(item=>{\r\n            num+=item.count;\r\n        });\r\n        return num;\r\n    }\r\n\r\n    @computed get checkNum(){\r\n        var num = 0;\r\n        this.carList.forEach(item=>{\r\n            if(item.checked){\r\n                num+=item.count;\r\n            }\r\n        });\r\n        return num;\r\n    }\r\n\r\n    @computed get total(){\r\n        var num = 0;\r\n        this.carList.forEach(item=>{\r\n            if(item.checked){\r\n                num+=item.count * item.goodPrice ;\r\n            }\r\n        });\r\n        return num;\r\n    }\r\n\r\n    @computed get quan(){\r\n        var flag = true;\r\n        this.carList.forEach(item=>{\r\n            if(!item.checked){\r\n                flag = false;\r\n            }\r\n        })\r\n        return flag;\r\n    }\r\n\r\n    set quan(newval){  // 监听 quan\r\n        this.carList = this.carList.map((item)=>{\r\n            item.checked = newval;\r\n            return item;\r\n        })\r\n    }\r\n\r\n    @action changeQuan = checked =>{\r\n        axios.post(\"/react/changechecked\",{\r\n            checked,\r\n            goodId:\"-1\",\r\n            mobile:sessionStorage.mobile\r\n        }).then(res=>{\r\n            this.carList = this.carList.map((item)=>{\r\n                item.checked = checked;\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n\r\n    @action changeOneCount = (goodId,flag)=>{\r\n        axios.post(\"/react/changecount\",{\r\n            flag,\r\n            goodId,\r\n            count:\"-1\",\r\n            mobile:sessionStorage.mobile\r\n        }).then(res=>{\r\n            this.carList = this.carList.map((item)=>{\r\n                if(item.goodId == goodId ){\r\n                    item.count += flag ? 1: -1;\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n        \r\n    }\r\n\r\n    @action changeCountByGoodId = (goodId,count)=>{\r\n        axios.post(\"/react/changecount\",{\r\n            goodId,\r\n            count,\r\n            mobile:sessionStorage.mobile\r\n        }).then(res=>{\r\n            this.carList = this.carList.map((item)=>{\r\n                if(item.goodId == goodId ){\r\n                    item.count = count * 1;\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n        \r\n    }\r\n\r\n    @action delGoodBySelect = () => {\r\n        axios.post(\"/react/delSelect\",{\r\n            mobile:sessionStorage.mobile\r\n        }).then(res=>{\r\n            this.carList = this.carList.filter(item=>!item.checked);\r\n        })\r\n        \r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    async fetchCarList(){\r\n        let res = await  axios.post(\"/react/getCarList\",{\r\n            mobile:sessionStorage.mobile\r\n        });\r\n    }\r\n\r\n}\r\n\r\nexport default new ShopCar();"],"sourceRoot":""}