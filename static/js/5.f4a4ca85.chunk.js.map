{"version":3,"sources":["assets/images/photo.png","scripts/components/upload/index.js","scripts/views/mine/index.js"],"names":["module","exports","initPic","require","UploadImg","getPic","axios","post","then","res","console","log","data","type","setState","pic","startSend","file","click","uploadFile","files","FormData","append","url","method","path","replace","localStorage","setItem","JSON","stringify","mobile","state","userInfo","getItem","parse","sessionStorage","this","src","alt","className","onClick","onChange","ref","el","Component","Mine","goLogin","history","push","clear","result","title","show"],"mappings":"6IAAAA,EAAOC,QAAU,IAA0B,mC,mICMvCC,EAAUC,EAAQ,KAGTC,EAAb,YAEI,aAAc,IAAD,8BACT,+CAuBJC,OAAO,WACHC,IAAMC,KAAK,uBAAuBC,MAAK,SAAAC,GACnCC,QAAQC,IAAIF,GACPA,EAAIG,KAAKC,KACV,EAAKC,SAAS,CAEVC,IAAIb,QA9BP,EAwCbc,UAAU,WACN,EAAKC,KAAKC,SAzCD,EA4CbC,WAAW,WACP,IAAIF,EAAO,EAAKA,KAAKG,MAAM,GACvBR,EAAO,IAAIS,SACfT,EAAKU,OAAO,SAASL,GACrBX,YAAM,CACFiB,IAAI,sBACJC,OAAO,OACPZ,SACDJ,MAAK,SAAAC,GACJ,EAAKK,SAAS,CACVC,IAAIN,EAAIG,KAAKa,KAAKC,QAAQ,SAAS,gCAEvCC,aAAaC,QAAQ,WAAWC,KAAKC,UAAU,CAC3CC,OAAOtB,EAAIG,KAAKmB,OAChBN,KAAK,EAAKO,MAAMjB,WAxDxB,EAAKiB,MAAQ,CACTjB,IAAI,IAHC,EAFjB,iFAWQ,IAAIkB,EAAWN,aAAaO,QAAQ,YACjCD,IACCA,EAAWJ,KAAKM,MAAMF,IACVF,QAAQK,eAAeL,OAC/BM,KAAKvB,SAAS,CACVC,IAAIkB,EAASR,OAMrBY,KAAKhC,WAtBjB,+BAiEa,IAAD,OACJ,OACI,6BACI,yBAAKiC,IAAKD,KAAKL,MAAMjB,IAAKwB,IAAI,GAAGC,UAAU,WAAWC,QAASJ,KAAKrB,YACpE,2BAAO0B,SAAUL,KAAKlB,WAAYN,KAAK,OAAO8B,IAAK,SAAAC,GAAE,OAAE,EAAK3B,KAAK2B,GAAIJ,UAAU,mBArE/F,GAA+BK,aCFzBC,E,YAEF,aAAc,IAAD,8BACT,+CAMJC,QAAQ,WACJC,IAAQC,KAAK,UACbb,eAAec,SAPf,EAAKlB,MAAQ,CACTD,OAAO,IAHF,E,iFAYO,IAAD,OACfzB,IAAMC,KAAK,oBAAoBC,MAAK,SAAAC,GAC3BA,EAAIG,KAAKC,MACV,EAAKC,SAAS,CACViB,OAAOtB,EAAIG,KAAKuC,YAKxBf,eAAeL,QACfiB,IAAQC,KAAK,Y,+BAObZ,KAAKL,MADLD,OAEJ,OACI,yBAAKS,UAAU,QACX,kBAAC,IAAD,CAAMY,MAAM,2BAAOC,KAAK,SACxB,yBAAKb,UAAU,UACX,yBAAKA,UAAU,QACX,kBAAC,EAAD,OAEJ,wBAAIC,QAASJ,KAAKU,SAAlB,qBAA+BX,eAAeL,QAC9C,0BAAMS,UAAU,MAAMC,QAASJ,KAAKU,SAApC,gBACA,0BAAMP,UAAU,YAEpB,wBAAIA,UAAU,WACV,4BACI,0BAAMA,UAAU,QADpB,gBAGA,4BACI,0BAAMA,UAAU,QADpB,gBAGA,4BACI,0BAAMA,UAAU,QADpB,sB,GAlDDK,aA2DHC","file":"static/js/5.f4a4ca85.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/photo.00e3a0e6.png\";","\r\nimport React,{Component} from \"react\";\r\nimport \"./index.scss\";\r\nimport {axios} from \"~\";\r\n// import {getMyPic} from \"&/actions\";\r\n\r\nvar initPic = require(\"@/assets/images/photo.png\");\r\n\r\n\r\nexport class UploadImg extends Component{\r\n\r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            pic:\"\"\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount(){\r\n        var userInfo = localStorage.getItem(\"userInfo\");\r\n        if(userInfo){\r\n            userInfo = JSON.parse(userInfo);\r\n            if(userInfo.mobile==sessionStorage.mobile){\r\n                this.setState({\r\n                    pic:userInfo.path\r\n                })\r\n            }else{\r\n                this.getPic();\r\n            }\r\n        }else{\r\n            this.getPic();\r\n        }\r\n    }\r\n\r\n    getPic=()=>{\r\n        axios.post(\"/react/getAvatarPic\").then(res=>{\r\n            console.log(res);\r\n            if(!!res.data.type){\r\n                this.setState({\r\n                    // pic:res.data.path.replace(\"public\",\"http://localhost:1909/\")\r\n                    pic:initPic\r\n                })\r\n            }else{\r\n                this.setState({\r\n                    pic:initPic\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    startSend=()=>{\r\n        this.file.click();\r\n    }\r\n\r\n    uploadFile=()=>{\r\n        var file = this.file.files[0];\r\n        var data = new FormData();\r\n        data.append('avatar',file);\r\n        axios({\r\n            url:\"/react/uploadavatar\",\r\n            method:\"POST\",\r\n            data\r\n        }).then(res=>{\r\n            this.setState({\r\n                pic:res.data.path.replace(\"public\",\"http://120.24.88.100:1910/\")\r\n            });\r\n            localStorage.setItem('userInfo',JSON.stringify({\r\n                mobile:res.data.mobile,\r\n                path:this.state.pic\r\n            }))\r\n        })\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <img src={this.state.pic} alt=\"\" className=\"touxiang\" onClick={this.startSend}/>\r\n                <input onChange={this.uploadFile} type=\"file\" ref={el=>this.file=el} className=\"uploadinp\"/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n// export default  UploadImg;","import React, {Component} from \"react\"\r\n\r\nimport \"./index.scss\";\r\nimport {Head} from \"&/components/head\"\r\nimport {UploadImg} from \"&/components/upload\"\r\nimport {axios,history} from \"~\"\r\n\r\nclass Mine extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            mobile:''\r\n        }\r\n    }\r\n\r\n    goLogin=()=>{\r\n        history.push(\"/login\");\r\n        sessionStorage.clear();\r\n    }\r\n\r\n    componentDidMount(){\r\n        axios.post(\"/react/getMobile\").then(res=>{\r\n            if(!!res.data.type){\r\n                this.setState({\r\n                    mobile:res.data.result\r\n                })\r\n            }\r\n        })\r\n\r\n        if(!sessionStorage.mobile){\r\n            history.push(\"/login\");\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const {\r\n            mobile\r\n        } = this.state\r\n        return(\r\n            <div className=\"mine\">\r\n                <Head title=\"个人中心\" show=\"true\"></Head>\r\n                <div className=\"banner\">\r\n                    <div className=\"toux\">\r\n                        <UploadImg></UploadImg>\r\n                    </div>\r\n                    <h2 onClick={this.goLogin}>用户：{sessionStorage.mobile}</h2>\r\n                    <span className=\"out\" onClick={this.goLogin}>退出</span>\r\n                    <span className=\"outSan\"></span>\r\n                </div>\r\n                <ul className=\"content\">\r\n                    <li>\r\n                        <span className=\"san\"></span>\r\n                        设置</li>\r\n                    <li>\r\n                        <span className=\"san\"></span>\r\n                        订单</li>\r\n                    <li>\r\n                        <span className=\"san\"></span>\r\n                        地址</li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default  Mine"],"sourceRoot":""}